server {
    listen 8080;
    server_name webserv_test;

    root ./www;
    index index.html;

    # Default error pages (put files under ./www/errors/)
    error_page 404 /errors/404.html;
    error_page 405 /errors/405.html;
    error_page 413 /errors/413.html;
    error_page 500 /errors/500.html;

    # Global max body size (rename to client_max_body_size if that's what you implemented)
    max_body_size 3;

    # 1) Basic static site
    location /
    {
        root ./www;
        index index.html;
        methods GET;
    }

    # 2) Autoindex directory listing
    location /autoindex/
    {
        root ./www/autoindex;
        autoindex on;
        methods GET;
    }

    # 3) File upload + download
    location /upload/
    {
        root ./www;
        upload_path ./www/uploads;   # directory must exist and be writable
        methods GET POST;
        #max_body_size 1048576;
    }

    # 4) Deletable directory
    location /delete/
    {
        root ./www/delete;
        autoindex on;
        methods GET DELETE;
    }

    # 5) Method-restricted location (405 tests)
    location /post_only/
    {
        root ./www/post_only;
		upload_path ./www/post_only;
		index index.html; 
        methods POST;
    }

    # 6) Redirect
    location /old/
    {
        # If your parser uses a different keyword, adapt (e.g. "redirect 301 /;")
        redirect /;
    }

    # 7) CGI
    location /cgi-bin/
    {
        cgi_extension .py /usr/bin/python3;
        cgi_extension .sh /bin/bash;
        cgi_path ./www/cgi-bin;
        methods GET POST;
        # optional:
        # cgi_timeout_ms 3000;
        # cgi_max_output_bytes 10485760;
    }
}